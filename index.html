<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Mobilcard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            height: 100%;
            overflow: hidden;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background-color: #007A33;
            -webkit-font-smoothing: antialiased;
        }
        
        .app-container {
            width: 100%;
            max-width: 430px;
            height: 100vh;
            height: 100dvh;
            margin: 0 auto;
            background-color: #007A33;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .header {
            padding: 16px 20px;
            padding-top: max(50px, env(safe-area-inset-top) + 16px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .journey-title {
            color: white;
            font-size: 24px;
            font-weight: 500;
            font-style: italic;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            font-weight: 300;
        }
        
        .content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 0 16px 16px;
            -webkit-overflow-scrolling: touch;
            padding-bottom: max(16px, env(safe-area-inset-bottom));
        }
        
        .card {
            background-color: white;
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .main-card {
            padding: 20px;
        }
        
        .logo-container {
            margin-bottom: 8px;
        }
        
        .card-title {
            font-size: 26px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 16px;
        }
        
        .field-label {
            font-size: 14px;
            color: #888888;
            margin-bottom: 2px;
        }
        
        .field-value {
            font-size: 22px;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 12px;
        }
        
        .divider {
            height: 1px;
            background-color: #e0e0e0;
            margin: 16px 0;
        }
        
        .route-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background-color: #3d3d3d;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        
        .route-badge span {
            color: white;
            font-size: 16px;
            font-weight: 600;
        }
        
        .route-text {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a1a;
            line-height: 1.3;
        }
        
        .bottom-card {
            overflow: hidden;
            position: relative;
        }
        
        .qr-section {
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .qr-section.hidden {
            opacity: 0;
            transform: scale(0.95);
            position: absolute;
            pointer-events: none;
            top: 0;
            left: 0;
            right: 0;
        }
        
        .qr-code {
            width: 280px;
            height: 280px;
        }
        
        .check-btn {
            display: block;
            margin: 30px auto 10px;
            padding: 14px 32px;
            background-color: #0099B8;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.1s ease, background-color 0.2s ease;
        }
        
        .check-btn:active {
            transform: scale(0.96);
            background-color: #007a94;
        }
        
        .animation-section {
            min-height: 400px;
            display: flex;
            flex-direction: column;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .animation-section.hidden {
            opacity: 0;
            transform: scale(0.95);
            position: absolute;
            pointer-events: none;
            top: 0;
            left: 0;
            right: 0;
        }
        
        .safe-trip-text {
            text-align: center;
            padding: 30px 20px 10px;
            font-size: 22px;
            font-weight: 600;
            color: #1a1a1a;
        }
        
        .scene-container {
            flex: 1;
            min-height: 320px;
            position: relative;
            overflow: hidden;
        }
        
        .scene-svg {
            width: 100%;
            height: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
        }
        
        .back-btn {
            display: block;
            margin: 10px auto 20px;
            padding: 12px 28px;
            background-color: #e8e8e8;
            color: #333;
            border: none;
            border-radius: 25px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.1s ease, background-color 0.2s ease;
        }
        
        .back-btn:active {
            transform: scale(0.96);
            background-color: #d0d0d0;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <div class="journey-title">Active journey <span id="timer">21:39</span></div>
            <button class="close-btn">✕</button>
        </div>
        
        <div class="content">
            <!-- Main Card -->
            <div class="card main-card">
                <div class="logo-container">
                    <svg width="80" height="50" viewBox="0 0 80 50">
                        <rect x="0" y="5" width="50" height="40" rx="5" fill="white" stroke="#8B1538" stroke-width="2"/>
                        <text x="8" y="35" font-size="28" font-weight="bold" fill="#8B1538">M</text>
                        <circle cx="55" cy="12" r="6" fill="#8B1538"/>
                        <circle cx="70" cy="12" r="6" fill="#8B1538"/>
                        <circle cx="55" cy="28" r="6" fill="#8B1538"/>
                        <circle cx="70" cy="28" r="6" fill="#8B1538"/>
                        <circle cx="55" cy="44" r="4" fill="#8B1538"/>
                    </svg>
                </div>
                
                <h2 class="card-title">Mobilcard 1 day</h2>
                
                <div class="field-label">Validated</div>
                <div class="field-value">27.11.2025, 07:41</div>
                
                <div class="field-label">Ticket holder</div>
                <div class="field-value">Vadym Yeremiichuk</div>
                
                <div class="divider"></div>
                
                <div class="field-label">Journey planner</div>
                <div class="route-badge"><span>R</span></div>
                <div class="route-text">Bahnhof Sterzing - Pfitsch – Bahnhof Meran</div>
            </div>
            
            <!-- Bottom Card (QR / Animation) -->
            <div class="card bottom-card" id="bottomCard">
                <!-- QR Code Section -->
                <div class="qr-section" id="qrSection">
                    <svg class="qr-code" viewBox="0 0 280 280">
                        <rect width="280" height="280" fill="white"/>
                        <!-- Top-left corner -->
                        <rect x="15" y="15" width="50" height="50" fill="black"/>
                        <rect x="22" y="22" width="36" height="36" fill="white"/>
                        <rect x="29" y="29" width="22" height="22" fill="black"/>
                        <!-- Top-right corner -->
                        <rect x="215" y="15" width="50" height="50" fill="black"/>
                        <rect x="222" y="22" width="36" height="36" fill="white"/>
                        <rect x="229" y="29" width="22" height="22" fill="black"/>
                        <!-- Bottom-left corner -->
                        <rect x="15" y="215" width="50" height="50" fill="black"/>
                        <rect x="22" y="222" width="36" height="36" fill="white"/>
                        <rect x="29" y="229" width="22" height="22" fill="black"/>
                        <!-- QR pattern -->
                        <g id="qrPattern"></g>
                    </svg>
                    <button class="check-btn" id="checkBtn">Check validity</button>
                </div>
                
                <!-- Animation Section -->
                <div class="animation-section hidden" id="animationSection">
                    <div class="safe-trip-text">Have a safe trip!</div>
                    <div class="scene-container">
                        <svg class="scene-svg" viewBox="0 0 400 300" preserveAspectRatio="xMidYMax slice">
                            <!-- Background mountains (light blue) -->
                            <polygon points="0,300 0,150 60,180 120,120 180,170 240,100 300,150 360,130 400,180 400,300" fill="#C5E3EC"/>
                            
                            <!-- Medium mountains -->
                            <polygon points="0,300 0,200 50,170 100,220 150,160 200,200 250,150 300,190 350,170 400,210 400,300" fill="#7DBDD1"/>
                            
                            <!-- Front mountains (darker blue) -->
                            <polygon points="0,300 0,240 80,200 160,260 240,180 320,230 400,200 400,300" fill="#2B8FAD"/>
                            <polygon points="150,300 150,220 200,180 250,220 300,190 350,230 400,200 400,300" fill="#2596B8"/>
                            
                            <!-- Cable line -->
                            <line x1="-20" y1="200" x2="420" y2="70" stroke="#333333" stroke-width="2.5"/>
                            
                            <!-- Cable car group -->
                            <g id="cableCar">
                                <!-- Support structure -->
                                <line x1="0" y1="-25" x2="-8" y2="0" stroke="#333333" stroke-width="2"/>
                                <line x1="0" y1="-25" x2="8" y2="0" stroke="#333333" stroke-width="2"/>
                                <line x1="0" y1="-28" x2="0" y2="-25" stroke="#333333" stroke-width="3"/>
                                <!-- Cabin body -->
                                <rect x="-20" y="0" width="40" height="30" rx="3" fill="white" stroke="#333333" stroke-width="2"/>
                                <!-- Left window -->
                                <rect x="-15" y="5" width="12" height="15" fill="#E8F4F8" stroke="#333333" stroke-width="1"/>
                                <line x1="-9" y1="5" x2="-9" y2="20" stroke="#333333" stroke-width="1"/>
                                <!-- Right window -->
                                <rect x="3" y="5" width="12" height="15" fill="#E8F4F8" stroke="#333333" stroke-width="1"/>
                                <line x1="9" y1="5" x2="9" y2="20" stroke="#333333" stroke-width="1"/>
                            </g>
                        </svg>
                    </div>
                    <button class="back-btn" id="backBtn">Show QR Code</button>
                </div>
            </div>
            
            <div style="height: 20px;"></div>
        </div>
    </div>
    
    <script>
        // Generate QR pattern
        const qrPattern = document.getElementById('qrPattern');
        for (let row = 0; row < 18; row++) {
            for (let col = 0; col < 18; col++) {
                const isTopLeft = row < 5 && col < 5;
                const isTopRight = row < 5 && col > 12;
                const isBottomLeft = row > 12 && col < 5;
                
                if (isTopLeft || isTopRight || isBottomLeft) continue;
                
                const shouldFill = (Math.sin(row * 7.3 + col * 13.7) * 43758.5453) % 1 > 0.5;
                
                if (shouldFill) {
                    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    rect.setAttribute('x', 15 + col * 14);
                    rect.setAttribute('y', 15 + row * 14);
                    rect.setAttribute('width', 12);
                    rect.setAttribute('height', 12);
                    rect.setAttribute('fill', 'black');
                    qrPattern.appendChild(rect);
                }
            }
        }
        
        // Timer countdown
        let totalSeconds = 21 * 60 + 39;
        const timerEl = document.getElementById('timer');
        
        function updateTimer() {
            const mins = Math.floor(totalSeconds / 60);
            const secs = totalSeconds % 60;
            timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (totalSeconds > 0) totalSeconds--;
        }
        
        setInterval(updateTimer, 1000);
        
        // Cable car animation
        const cableCar = document.getElementById('cableCar');
        let position = 0;
        const startX = -20;
        const endX = 420;
        const startY = 200;
        const endY = 70;
        const duration = 8000;
        
        let lastTime = 0;
        function smoothAnimateCableCar(currentTime) {
            if (!lastTime) lastTime = currentTime;
            const deltaTime = currentTime - lastTime;
            
            position += (deltaTime / duration) * 100;
            if (position > 100) position = 0;
            
            const x = startX + (endX - startX) * (position / 100);
            const y = startY + (endY - startY) * (position / 100);
            
            cableCar.setAttribute('transform', `translate(${x}, ${y})`);
            
            lastTime = currentTime;
            requestAnimationFrame(smoothAnimateCableCar);
        }
        
        requestAnimationFrame(smoothAnimateCableCar);
        
        // Toggle between QR and Animation
        const qrSection = document.getElementById('qrSection');
        const animationSection = document.getElementById('animationSection');
        const checkBtn = document.getElementById('checkBtn');
        const backBtn = document.getElementById('backBtn');
        
        checkBtn.addEventListener('click', function() {
            qrSection.classList.add('hidden');
            animationSection.classList.remove('hidden');
        });
        
        backBtn.addEventListener('click', function() {
            animationSection.classList.add('hidden');
            qrSection.classList.remove('hidden');
        });
    </script>
</body>
</html>
